<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node - Maria DB</title>
    <link rel="stylesheet" href="/css/common.css">
    
</head>

<body>
    <h1>Maria DB</h1>
    <input type="button" value="전체 데이터 가져오기" id="get_all_data_btn">
    
    <!-- 데이터 출력 영역 -->
    <div id="content"></div>

    <script>
        let get_all_data_btn = document.getElementById('get_all_data_btn');

        get_all_data_btn.addEventListener('click', (err) => {
            // ajax로 데이터 가져오기
            let request = new XMLHttpRequest();

            request.open('GET', '/artists/all');
            request.send('');
            request.addEventListener('load', () => {
                // JSON 문자열 확인
                let data = JSON.parse(request.responseText);

                if (data.result === true) {
                    let display = "<div align='center' class='body'>";
                    display += "<h2>아티스트 목록</h2>";
                    display += "<table border = '1'>";
                    display += "<tr class='header'>";
                    display += "<th align='center' width='80'>ID</th>";
                    display += "<th align='center' width='340'>이름</th>"
                    display += "<th align='center' width='140'>주소</th>"
                    display += "</tr>";

                    // list 키에 있는 데이터 가져오기
                    let arr = data.list;

                    for (let artist of arr) {
                        display += "<tr class='record'>";
                        display += "<td align='center'>" + artist.ID + "</td>";
                        display += "<td align='left'>" + artist.NAME + "</td>";
                        display += "<td align='right'>" + artist.REGION + "</td>";
                        display += "</tr>";
                    }
                    
                    display += "</table>";
                    display += "</div>";

                    content.innerHTML = display;
                } else {
                    content.innerHTML = "데이터 가져오기 실패";
                }
            })
        });
    </script>
</body>

</html>